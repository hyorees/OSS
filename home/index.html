<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>ê¸°ë¶„ & í• ì¼ ìº˜ë¦°ë”</title>
    <link rel="stylesheet" href="style.css">
</head>


<body>
    <div class="container">
        <section class="calendar-section">
            <header>
                <div class="profile"></div>
                <span class="title">í”„ë¡œí•„</span>
                <input type="text" class="search" placeholder="ê²€ìƒ‰">
            </header>
            <div class="calendar-header">
                <button id="prevMonth">&lt;</button>
                <span id="monthYear"></span>
                <button id="nextMonth">&gt;</button>
            </div>
            <table class="calendar">
                <thead>
                    <tr>
                        <th>ì¼</th>
                        <th>ì›”</th>
                        <th>í™”</th>
                        <th>ìˆ˜</th>
                        <th>ëª©</th>
                        <th>ê¸ˆ</th>
                        <th>í† </th>
                    </tr>
                </thead>
                <tbody id="calendarBody"></tbody>
            </table>
            <div class="mood-select">
                <span data-mood="happy">ğŸ˜Š</span>
                <span data-mood="sad">ğŸ˜¢</span>
                <span data-mood="angry">ğŸ˜ </span>
                <span data-mood="neutral">ğŸ˜</span>
                <span data-mood="tired">ğŸ¥±</span>
                <span data-mood="smile">ğŸ˜</span>
            </div>
            <div class="memo-section">
                <label for="memo">ë©”ëª¨</label>
                <textarea id="memo" rows="4"></textarea>
                <button id="saveMemo">ì €ì¥</button>
            </div>
        </section>
        <section class="todo-section">
            <h2>ì˜¤ëŠ˜ì˜ í• ì¼</h2>
            <div class="tabs">
                <button class="tab active" data-category="all">ì „ì²´</button>
                <button class="tab" data-category="work">ğŸ«</button>
                <button class="tab" data-category="personal">ğŸ™â€â™€ï¸</button>
                <button class="tab" data-category="exercise">ğŸŠ</button>
                <button class="tab" data-category="shopping">ğŸ›’</button>
            </div>
            <div class="category-section">
                <label for="categorySelect">ì¹´í…Œê³ ë¦¬ ì„ íƒ:</label>
                <select id="categorySelect">
                    <option value="">ê¸°ë³¸</option>
                    <option value="work">ğŸ«</option>
                    <option value="personal">ğŸ™â€â™€ï¸</option>
                    <option value="exercise">ğŸŠ</option>
                    <option value="shopping">ğŸ›’</option>
                    <option value="new">ìƒˆ ì¹´í…Œê³ ë¦¬ ë§Œë“¤ê¸°</option>
                </select>
                <button id="addTodo">+</button>
                <div id="newCategoryDiv" style="display: none;">
                    <input type="text" id="newCategoryInput" placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    <button id="addNewCategoryButton">ì¹´í…Œê³ ë¦¬ ì¶”ê°€</button>
                </div>
                <input type="text" id="todoInput" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" >
                
            </div>
            <div id="custom-category-sections"></div>
            <ul id="todoList"></ul>
        </section>
    </div>
    <script src="script.js"></script>
    <script>
        const categorySelect = document.getElementById("categorySelect");
        const newCategoryDiv = document.getElementById("newCategoryDiv");
        const newCategoryInput = document.getElementById("newCategoryInput");
        const addNewCategoryButton = document.getElementById("addNewCategoryButton");
        const todoInput = document.getElementById("todoInput");
        const addTodoBtn = document.getElementById("addTodo");
        const todoList = document.getElementById("todoList");
        const tabs = document.querySelectorAll(".tab");

        let todos = [];

        // ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹œ ìƒˆ ì¹´í…Œê³ ë¦¬ ì…ë ¥ì°½ ì œì–´
        categorySelect.addEventListener("change", () => {
            if (categorySelect.value === "new") {
                newCategoryDiv.style.display = "block";
                todoInput.style.display = "none";
            } else {
                newCategoryDiv.style.display = "none";
                todoInput.style.display = "block";
            }
        });

        // ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ
        addNewCategoryButton.addEventListener("click", () => {
            const newCategoryName = newCategoryInput.value.trim();
            if (!newCategoryName) return;

            const newOption = document.createElement("option");
            newOption.value = newCategoryName;
            newOption.textContent = newCategoryName;

            categorySelect.insertBefore(newOption, categorySelect.lastElementChild);
            categorySelect.value = newCategoryName;

            newCategoryDiv.style.display = "none";
            newCategoryInput.value = "";
            todoInput.style.display = "block";
        });

        // í•  ì¼ ì¶”ê°€ ë²„íŠ¼
        addTodoBtn.addEventListener("click", () => {
            const text = todoInput.value.trim();
            const category = categorySelect.value || "default";
            if (text === "") return;

            todos.push({ text, category, completed: false });
            todoInput.value = "";
            renderTodos(getActiveCategory());
        });

        // íƒ­ í´ë¦­ ì´ë²¤íŠ¸
        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                document.querySelector(".tab.active").classList.remove("active");
                tab.classList.add("active");
                renderTodos(tab.dataset.category);
            });
        });

        function getActiveCategory() {
            return document.querySelector(".tab.active").dataset.category;
        }

        function renderTodos(filter) {
            todoList.innerHTML = "";
            const filtered = filter === "all" ? todos : todos.filter(t => t.category === filter);

            filtered.forEach((todo, index) => {
                const li = document.createElement("li");
                li.className = todo.completed ? "completed" : "";

                li.innerHTML = `
                    <span>${todo.text}</span>
                    <div>
                        <button onclick="toggleComplete(${index})">âœ”ï¸</button>
                        <button onclick="deleteTodo(${index})">ğŸ—‘ï¸</button>
                    </div>
                `;
                todoList.appendChild(li);
            });
        }

        window.toggleComplete = function(index) {
            todos[index].completed = !todos[index].completed;
            renderTodos(getActiveCategory());
        };

        window.deleteTodo = function(index) {
            todos.splice(index, 1);
            renderTodos(getActiveCategory());
        };

        // ì´ˆê¸° ë Œë”
        renderTodos("all");
    </script>

    
</body>

</html>